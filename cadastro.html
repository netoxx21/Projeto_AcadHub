<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" sizes="512x512" href="/Projeto-AcadHub/Frontend/js/img/logo.png?v=6">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro-AcadHub</title>
    <link rel="stylesheet" href="frontend/style.css">
</head>
<body class="login-page">
     <body>
    
    <main class="container">
        
        <div class="lado-azul">
            <div class="conteudo-lado-azul">
                <img src="frontend/assets/logo.png" alt="Ícone AcadHub" class="imagem-centralizada">
                
                <div class="link-cadastro">
                    Já tem uma conta? <a href="login.html">Fazer Login</a>
                </div>
            </div>
        </div>
        
        <div class="lado-branco">
            
            <h1>Cadastro</h1>
            
            <form id="form-cadastro">
                
                <div class="input-group">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome" required placeholder="Seu nome completo">
                </div>

                <div class="input-group">
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" name="email" required placeholder="exemplo@acadhub.com">
                </div>

                <div class="input-group">
                    <label for="senha">Senha:</label>
                    <input type="password" id="senha" name="senha" required placeholder="Mínimo 8 caracteres">
                </div>

                <div class="input-group">
                    <label for="confirmar-senha">Confirme a Senha:</label>
                    <input type="password" id="confirmar-senha" name="confirmar-senha" required placeholder="Confirme sua senha">
                </div>

                <button type="submit" class="btn-primary">Cadastrar</button>
            </form>

        </div>
    </main>
<script>

     // Quando o formulário for enviado:
        document.getElementById('form-cadastro').addEventListener('submit', async (e) => {
        e.preventDefault(); // Impede que a página recarregue

        // Pega os valores dos campos
        const nome = document.getElementById('nome').value;
        const email = document.getElementById('email').value;
        const senha = document.getElementById('senha').value;

        // Faz uma requisição POST para a API de cadastro
        const res = await fetch('http://localhost:4000/api/cadastro', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },// Corpo em formato JSON
            body: JSON.stringify({ nome, email, senha })
    });

        // Interpreta a resposta como JSON
        const data = await res.json();

            // Se o cadastro foi bem-sucedido
            if (res.ok) {
                alert('Cadastro realizado com sucesso! Faça login.');
                // Redireciona para a página de login
                    window.location = '/login.html';
                } else {
                    // Exibe mensagem de erro retornada pelo servidor
                    alert(data.error || data.message || 'Erro no cadastro');
            }
        });
</script>

</body>
</html>